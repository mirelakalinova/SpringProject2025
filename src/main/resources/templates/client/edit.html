<div class="container">
	<section class="clients" xmlns:th="http://www.w3.org/1999/xhtml">

		<h1 th:text="${client.firstName}  + ' ' +  ${client.lastName}"></h1>

		<div th:if="${message}" th:text="${message}" style="white-space: pre-line;"
			 th:class="'alert ' + (${status} == 'success' ? 'alert-success' : 'alert-danger')"></div>
		<div class="client-form">
			<form th:method="post" th:action="@{/client/edit/{id}(id=${client.id})}" th:object="${client}">
				<input type="hidden" th:name="_method" th:value="put"/>

				<h2 class="subheading">Данни за клиента</h2>
				<div class="form-group">
					<label for="firstName">Име</label>
					<input id="firstName" th:field="${client.firstName}" type="text" th:value="${client.firstName}"
						   class="form-control">
				</div>
				<div class="form-group">
					<label for="lastName">фамилия</label>
					<input id="lastName" th:field="*{lastName}" type="text" th:value="*{lastName}"
						   class="form-control"></div>
				<div class="form-group">
					<label for="phone">Телефон</label>
					<input id="phone" th:field="*{phone}" type="text" th:value="*{phone}" class="form-control">
				</div>
				<div class="form-group">
					<label for="email">email</label>
					<input id="email" th:field="*{email}" type="text" th:value="*{email}" class="form-control">
				</div>
				<div class="form-group">

					<div class="form-group">
						<label for="carToAdd">Добави кола</label>
						<select th:field="*{carId}" class="d-none form-select select2" id="carToAdd" name="carId"
								onblur="selectSearch()">
							<option value="">Избери</option>
							<option th:if="${carsWithoutUser.empty}" disabled th:value="null">Няма налични коли</option>
							<option th:each="car : ${carsWithoutUser}"
									th:text="${car.registrationNumber} "
									th:value="${car.carId}"></option>
						</select>

					</div>

					<div class="form-group">
						<label for="companyToAdd">Добави фирма</label>
						<select th:field="*{companyId}" class="d-none form-select select2" id="companyToAdd"
								name="client"
								onblur="selectSearch()">
							<option value="">Избери</option>
							<option th:if="${companiesWithoutUser.empty}" disabled th:value="null">Няма налични фирми
							</option>
							<option th:each="c : ${companiesWithoutUser}"
									th:text="${c.name} "
									th:value="${c.id}"></option>
						</select>

					</div>

				</div>
				<button  type="submit" class="submit">Запази</button>
			</form>
			<hr>

			<div class="box">
				<h2 class="subheading">Данни за автомобила</h2>
			</div>
			<div class="table-responsive">
				<table class="table table-striped table-hover">
					<thead>
					<tr>
						<th>Регистрационен номер</th>
						<th>Марка</th>
						<th>Модел</th>
						<th>Година</th>
						<th>kw</th>
						<th>к.с.</th>
						<th>Кубатура</th>
						<th>Шаси</th>
						<th>Премахни</th>
					</tr>
					</thead>
					<tbody>
					<tr th:each="car : ${client.cars}">
						<td th:text="${car.registrationNumber}"></td>
						<td th:text="${car.make}"></td>
						<td th:text="${car.model}"></td>
						<td th:text="${car.year}"></td>
						<td th:text="${car.kw}"></td>
						<td th:text="${car.hp}"></td>
						<td th:text="${car.cube}"></td>
						<td th:text="${car.vin}"></td>
						<td>
							<form th:action="@{/client/remove-car/{id}(id=${car.id})}" th:method="post">
								<input type="hidden" name="clientId" th:value="${client.id}">

								<button type="submit" class="user-delete-btn user-btn">
									Премахни
								</button>
							</form>
						</td>
					</tr>
					</tbody>
				</table>
			</div>
			<hr>
			<div class="table-responsive">
				<div class="box">
					<h2 class="subheading">Данни за фирми</h2></div>
				<table class="table table-striped table-hover">
					<thead>
					<tr>
						<th>Име</th>
						<th>ЕИК</th>
						<th>ДДС номер</th>
						<th>Адрес</th>
						<th>МОЛ</th>
						<th>Премахни</th>

					</tr>
					</thead>
					<tbody>
					<tr th:each="company : ${companies}">
						<td th:text="${company.name}"></td>
						<td th:text="${company.uic}"></td>
						<td th:text="${company.vatNumber}"></td>
						<td th:text="${company.address}"></td>
						<td th:text="${company.accountablePerson}"></td>
						<td>
							<form th:action="@{/client/remove-company/{id}(id=${company.id})}" th:method="post">
								<input type="hidden" name="clientId" th:value="${client.id}">

								<button type="submit" class="user-delete-btn user-btn">
									Премахни
								</button>
							</form>
						</td>
					</tr>
					</tbody>
				</table>

			</div>
		</div>
	</section>
</div>