<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:th="http://www.thymeleaf.org"
	  lang="bg">
<head>

	<meta charset="UTF-8"/>
	<title>Поръчка</title>
	<style>
		@font-face {
		font-family: 'Roboto Condensed', sans-serif;
		}
		body {
			font-family: 'Roboto Condensed', sans-serif;
			font-size: 12px;
			color: #000;
		}

		.header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 10px;
		}

		h3 {
			margin: 0 0 6px 0;
		}

		hr {
			border: none;
			border-top: 1px solid #F3F3F3;
			margin: 8px 0;
		}
		.signs{
			display:flex;
			flex-direction: row;
			justify-content: space-between;
		}
		.row {
			display: flex;
			justify-content: space-between;
			gap: 20px;
			margin-bottom: 10px;
		}

		.col {
			min-width: 30%;
			display: block;
			margin: 0 auto;
		}

		.client-data {
			text-align: right;
		}

		table {
			width: 100%;
			border-collapse: collapse;
			margin-top: 8px;
		}

		th,
		td {
			border-bottom: 1px solid #F3F3F3;
			padding: 6px;
			font-size: 12px;
		}

		th {
			background: #F3F3F3;
			text-align: left;
		}

		tfoot td {
			font-weight: 700;
		}

		.right {
			text-align: right;
		}

		.totals {
			margin-top: 8px;
			text-align: right;
		}

		.small {
			font-size: 11px;
			color: #333;
		}

	</style>
</head>
<body>
<div class="header">
	<div class="logo" style="display:block; margin:0 auto">
		<img src="classpath:/static/images/logo-wb.png"/>
		<br/>	<br/>

	</div>
	<div>
		<h3>
			Поръчка за ремонт на автомобил:
			<span th:text="${order.car != null ? order.car.registrationNumber : ''}"></span>
			<span> / </span>
			<span th:text="${order.createdAt != null ? #temporals.format(order.createdAt, 'dd.MM.yyyy') : ''}"></span>
		</h3>
	</div>
	<div class="small">
		<div th:if="${order != null}">
			<div>Номер поръчка: <span th:text="${order.id}"></span></div>
			<div th:if="${order.editedAt != null}">Редактирано: <span
					th:text="${#temporals.format(order.editedAt, 'dd.MM.yyyy HH:mm')}"></span></div>
		</div>
	</div>
</div>

<hr/>

<table style="width:100%">
	<thead>
	<tr>
		<th style="text-align:left;"><h6>Получател</h6></th>
		<th style="text-align:right;"><h6>Предоставил услугата</h6></th>

	</tr>
	</thead>
	<tbody>

	<tr>
		<td style="text-align:left; vertical-align: baseline;">
			<div th:if="${order.client == null && order.company == null}">
				<span th:text="${order.car != null ? order.car.registrationNumber : ''}"></span>
			</div>

			<div th:if="${order.client != null}">
				<p>Име на клиент:
					<span th:text="${order.client.firstName}"></span>
					<span th:text="${order.client.lastName}"></span>
				</p>
				<p>Телефон: <span th:text="${order.client.phone}"></span></p>
			</div>

			<div th:if="${order.company != null}">
				<p><strong th:text="${order.company.name}"></strong></p>
				<p>Адрес: <span th:text="${order.company.address}"></span></p>
				<p>ЕИК/Булстат: <span th:text="${order.company.uic}"></span></p>
				<p>ДДС: <span th:text="${order.company.vatNumber}"></span></p>
				<p>МОЛ: <span th:text="${order.company.accountablePerson}"></span></p>
			</div>

		</td>

		<td style="text-align:right;"><p>Име: <span>Дорела Ауто ЕООД</span></p>
			<p>Телефон: <span>0896619422</span></p>
			<p>ЕИК: <span>201799256</span></p>
			<p>Адрес: <span>Русе, ул. Боримечка 35</span></p>
			<p>МОЛ: <span>Галина Калинова</span></p></td>
	</tr>
	</tbody>
</table>



<h4>Закупени части</h4>
<div class="table-responsive">
	<table>
		<thead>
		<tr>

			<th>Име на част</th>
			<th class="right">Цена</th>
			<th class="right">Брой</th>
			<th class="right">Общо</th>
		</tr>
		</thead>
		<tbody>
		<tr th:if="${order.partList == null or #lists.isEmpty(partList)}">
			<td colspan="5" class="small">Няма добавени части.</td>
		</tr>

		<tr th:each="part : ${partList}">

			<td th:text="${part.name}"></td>
			<td class="right" th:text="${#numbers.formatDecimal(part.price, 2, 'COMMA', 2, 'POINT')}"></td>


			<td class="right" th:text="${part.quantity != null ? part.quantity : 1}"></td>

			<td class="right"
				th:text="${(part.quantity != null ? part.quantity : 1) * (part.price != null ? part.price : 0) }">
			</td>
		</tr>
		</tbody>

	</table>
</div>


<h4>Извършени услуги</h4>
<div class="table-responsive">
	<table>
		<thead>
		<tr>

			<th>Име на услуга</th>
			<th class="right">Цена</th>
			<th class="right">Брой</th>
			<th class="right">Общо</th>
		</tr>
		</thead>
		<tbody>
		<tr th:if="${order.repairList == null or #lists.isEmpty(repairList)}">
			<td colspan="5" class="small">Няма добавени услуги.</td>
		</tr>

		<tr th:each="repair : ${repairList}">

			<td th:text="${repair.name}"></td>
			<td class="right"
				th:text="${#numbers.formatDecimal(repair.price != null ? repair.price : 0, 2, 'COMMA', 2, 'POINT')}"></td>
			<td class="right" th:text="${repair.quantity != null ? repair.quantity : 1}"></td>
			<td class="right"
				th:text="${(repair.quantity != null ? repair.quantity : 1) * (repair.price != null ? repair.price : 0)}">
			</td>
		</tr>
		</tbody>

	</table>
</div>


<div class="totals">
	<div>Сума без ДДС:
		<span th:text="${#numbers.formatDecimal(order.subtotal != null ? order.subtotal : 0, 2, 'COMMA', 2, 'POINT')}"></span>
		<span> лв.</span>
	</div>

	<div>ДДС (20.00%):
		<span th:text="${#numbers.formatDecimal(order.tax != null ? order.tax : 0, 2, 'COMMA', 2, 'POINT')}"></span>
		<span> лв.</span>
	</div>

	<div>Отстъпка:
		<span th:text="${#numbers.formatDecimal(order.discountAmount != null ? order.discountAmount : 0, 2, 'COMMA', 2, 'POINT')}"></span>
		<span> лв.</span>
	</div>

	<div style="font-weight:700; margin-top:6px;">Сума с ДДС:
		<span th:text="${#numbers.formatDecimal(order.total != null ? order.total : 0, 2, 'COMMA', 2, 'POINT')}"></span>
		<span> лв.</span>
	</div>
</div>


<table style="width:100%; margin-top:30px;">
	<tr>
		<td>Приел:<br/><br/>......................</td>
		<td style="text-align:right;">Предал:<br/><br/>......................</td>
	</tr>
</table>
</body>
</html>
